(function(){"use strict";var t={73:function(t,e,s){var r=s(471),o=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("nav",{staticClass:"navbar navbar-expand-lg navbar-dark bg-primary"},[e("div",{staticClass:"container"},[e("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[t._v("ðŸ“š Book Store")]),e("button",{staticClass:"btn btn-outline-light ml-auto",attrs:{disabled:!t.cartItems.length},on:{click:function(e){t.currentPage="cart"}}},[t._v(" ðŸ›’ Cart ("+t._s(t.cartItems.length)+") ")])])]),"lessons"===t.currentPage?e("div",{staticClass:"container mt-4"},[e("div",{staticClass:"row mb-4"},[e("div",{staticClass:"col-12"},[e("h2",[t._v("ðŸ“‹ Available Books")]),e("div",{staticClass:"search-box mb-3"},[e("label",[t._v("ðŸ” Search Books:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search by title or genre..."},domProps:{value:t.searchQuery},on:{input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}})]),e("div",{staticClass:"sort-controls"},[e("label",[t._v("ðŸ“Š Sort by:")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.sortBy,expression:"sortBy"}],staticClass:"form-control d-inline-block w-auto mx-2",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.sortBy=e.target.multiple?s:s[0]}}},[e("option",{attrs:{value:"subject"}},[t._v("Title")]),e("option",{attrs:{value:"location"}},[t._v("Genre")]),e("option",{attrs:{value:"price"}},[t._v("Price")]),e("option",{attrs:{value:"spaces"}},[t._v("Stock")])]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.sortOrder,expression:"sortOrder"}],staticClass:"form-control d-inline-block w-auto",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.sortOrder=e.target.multiple?s:s[0]}}},[e("option",{attrs:{value:"asc"}},[t._v("â¬†ï¸ Ascending")]),e("option",{attrs:{value:"desc"}},[t._v("â¬‡ï¸ Descending")])])])])]),e("div",{staticClass:"row"},t._l(t.filteredAndSortedLessons,function(s){return e("div",{key:s.id,staticClass:"col-md-4 mb-4"},[e("div",{staticClass:"card h-100"},[e("div",{staticClass:"card-body"},[e("h5",{staticClass:"card-title"},[t._v(t._s(s.emoji)+" "+t._s(s.subject))]),e("p",{staticClass:"card-text"},[t._v(" ðŸ“š Genre: "+t._s(s.location)),e("br"),t._v(" ðŸ’° Price: $"+t._s(s.price)),e("br"),t._v(" ðŸ“¦ In Stock: "+t._s(s.spaces)+" ")]),e("button",{staticClass:"btn btn-primary w-100",attrs:{disabled:0===s.spaces},on:{click:function(e){return t.addToCart(s)}}},[t._v(" ðŸ›’ Add to Cart ")])])])])}),0),0===t.filteredAndSortedLessons.length?e("div",{staticClass:"text-center mt-5"},[e("h3",[t._v("No books found ðŸ“š")]),e("p",[t._v("Try adjusting your search query")])]):t._e()]):t._e(),"cart"===t.currentPage?e("div",{staticClass:"container mt-4"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("h2",[t._v("ðŸ›’ Shopping Cart")]),e("button",{staticClass:"btn btn-outline-primary mb-4",on:{click:function(e){t.currentPage="lessons"}}},[t._v(" â¬…ï¸ Back to Books ")])])]),t.cartItems.length?e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-8"},t._l(t.cartItems,function(s){return e("div",{key:s.id,staticClass:"card mb-3"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"d-flex justify-content-between align-items-center"},[e("div",[e("h5",{staticClass:"card-title"},[t._v(t._s(s.emoji)+" "+t._s(s.subject))]),e("p",{staticClass:"card-text mb-0"},[t._v(" ðŸ“š "+t._s(s.location)+" | ðŸ’° $"+t._s(s.price)+" ")])]),e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.removeFromCart(s)}}},[t._v(" âŒ Remove ")])])])])}),0),e("div",{staticClass:"col-md-4"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("h5",{staticClass:"card-title"},[t._v("ðŸ’° Order Summary")]),e("p",{staticClass:"card-text"},[t._v(" Total Items: "+t._s(t.cartItems.length)),e("br"),t._v(" Total Price: $"+t._s(t.cartTotal)+" ")]),e("button",{staticClass:"btn btn-success w-100",on:{click:function(e){t.currentPage="checkout"}}},[t._v(" ðŸ’³ Proceed to Checkout ")])])])])]):e("div",{staticClass:"text-center mt-5"},[e("h3",[t._v("Your cart is empty ðŸ›’")]),e("button",{staticClass:"btn btn-primary mt-3",on:{click:function(e){t.currentPage="lessons"}}},[t._v(" Continue Shopping ")])])]):t._e(),"checkout"===t.currentPage?e("div",{staticClass:"container mt-4"},[e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("h2",{staticClass:"card-title text-center"},[t._v("ðŸ’³ Checkout")]),e("form",{on:{submit:function(e){return e.preventDefault(),t.submitOrder.apply(null,arguments)}}},[e("div",{staticClass:"form-group"},[e("label",[t._v("ðŸ§â€â™‚ï¸ Name (letters only)")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.checkoutForm.name,expression:"checkoutForm.name"}],staticClass:"form-control",attrs:{type:"text",pattern:"[A-Za-z ]+",required:""},domProps:{value:t.checkoutForm.name},on:{input:[function(e){e.target.composing||t.$set(t.checkoutForm,"name",e.target.value)},t.filterLettersOnly]}})]),e("div",{staticClass:"form-group"},[e("label",[t._v("ðŸ“ž Phone (numbers only)")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.checkoutForm.phone,expression:"checkoutForm.phone"}],staticClass:"form-control",attrs:{type:"tel",pattern:"[0-9]+",required:""},domProps:{value:t.checkoutForm.phone},on:{input:[function(e){e.target.composing||t.$set(t.checkoutForm,"phone",e.target.value)},t.filterNumbersOnly]}})]),e("div",{staticClass:"text-center mt-4"},[e("button",{staticClass:"btn btn-outline-secondary mr-2",attrs:{type:"button"},on:{click:function(e){t.currentPage="cart"}}},[t._v(" â¬…ï¸ Back to Cart ")]),e("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:!t.isCheckoutValid}},[t._v(" âœ… Place Order ")])])])])])])])]):t._e()])},a=[],n={name:"App",data(){return{currentPage:"lessons",lessons:[],cartItems:[],sortBy:"subject",sortOrder:"asc",searchQuery:"",checkoutForm:{name:"",phone:""}}},computed:{filteredLessons(){if(!this.searchQuery)return this.lessons;const t=this.searchQuery.toLowerCase();return this.lessons.filter(e=>e.subject.toLowerCase().includes(t)||e.location.toLowerCase().includes(t))},filteredAndSortedLessons(){return[...this.filteredLessons].sort((t,e)=>{let s="asc"===this.sortOrder?1:-1;return"price"===this.sortBy||"spaces"===this.sortBy?(t[this.sortBy]-e[this.sortBy])*s:t[this.sortBy].localeCompare(e[this.sortBy])*s})},cartTotal(){return this.cartItems.reduce((t,e)=>t+e.price,0)},isCheckoutValid(){const t=/^[A-Za-z ]+$/,e=/^[0-9]+$/;return t.test(this.checkoutForm.name)&&e.test(this.checkoutForm.phone)}},created(){this.fetchBooks()},methods:{filterLettersOnly(t){this.checkoutForm.name=t.target.value.replace(/[^A-Za-z ]/g,"")},filterNumbersOnly(t){this.checkoutForm.phone=t.target.value.replace(/[^0-9]/g,"")},async fetchBooks(){try{const t=await fetch("https://bookstore-backend-xd2r.onrender.com/api/books"),e=await t.json();this.lessons=e.map(t=>({...t,id:t._id}))}catch(t){console.error("Error fetching books:",t),alert("Failed to load books. Please try again later.")}},async addToCart(t){if(t.spaces>0)try{const e=await fetch(`https://bookstore-backend-xd2r.onrender.com/api/books/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({spaces:t.spaces-1})});if(!e.ok)throw new Error("Failed to update book stock");{const e=this.lessons.findIndex(e=>e.id===t.id);this.lessons[e].spaces--,this.cartItems.push({...this.lessons[e]})}}catch(e){console.error("Error updating book stock:",e),alert("Failed to add book to cart. Please try again.")}},async removeFromCart(t){try{const e=await fetch(`https://bookstore-backend-xd2r.onrender.com/api/books/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({spaces:t.spaces+1})});if(!e.ok)throw new Error("Failed to update book stock");{const e=this.cartItems.findIndex(e=>e.id===t.id);if(e>-1){this.cartItems.splice(e,1);const s=this.lessons.findIndex(e=>e.id===t.id);this.lessons[s].spaces++}}}catch(e){console.error("Error updating book stock:",e),alert("Failed to remove book from cart. Please try again.")}},async submitOrder(){if(this.isCheckoutValid)try{const t={name:this.checkoutForm.name,phone:this.checkoutForm.phone,books:this.cartItems.map(t=>({id:t.id,subject:t.subject,price:t.price}))},e=await fetch("https://bookstore-backend-xd2r.onrender.com/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error("Failed to submit order");alert("âœ… Order submitted successfully!"),this.cartItems=[],this.checkoutForm.name="",this.checkoutForm.phone="",this.currentPage="lessons",await this.fetchBooks()}catch(t){console.error("Error submitting order:",t),alert("Failed to submit order. Please try again.")}}}},i=n,c=s(656),l=(0,c.A)(i,o,a,!1,null,null,null),u=l.exports;r.Ay.config.productionTip=!1,new r.Ay({render:t=>t(u)}).$mount("#app")}},e={};function s(r){var o=e[r];if(void 0!==o)return o.exports;var a=e[r]={exports:{}};return t[r](a,a.exports,s),a.exports}s.m=t,function(){var t=[];s.O=function(e,r,o,a){if(!r){var n=1/0;for(u=0;u<t.length;u++){r=t[u][0],o=t[u][1],a=t[u][2];for(var i=!0,c=0;c<r.length;c++)(!1&a||n>=a)&&Object.keys(s.O).every(function(t){return s.O[t](r[c])})?r.splice(c--,1):(i=!1,a<n&&(n=a));if(i){t.splice(u--,1);var l=o();void 0!==l&&(e=l)}}return e}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[r,o,a]}}(),function(){s.d=function(t,e){for(var r in e)s.o(e,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};s.O.j=function(e){return 0===t[e]};var e=function(e,r){var o,a,n=r[0],i=r[1],c=r[2],l=0;if(n.some(function(e){return 0!==t[e]})){for(o in i)s.o(i,o)&&(s.m[o]=i[o]);if(c)var u=c(s)}for(e&&e(r);l<n.length;l++)a=n[l],s.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return s.O(u)},r=self["webpackChunkafter_school_frontend"]=self["webpackChunkafter_school_frontend"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=s.O(void 0,[504],function(){return s(73)});r=s.O(r)})();
//# sourceMappingURL=app.43b0814d.js.map